---
import { Icon } from "astro-icon/components";
import type { CollectionEntry } from "astro:content";
import DivImage from "./DivImage.astro";

interface Props {
    projectEntry: CollectionEntry<"projects">;
    classList?: string;
    rest?: any;
}
const { projectEntry, classList, ...rest } = Astro.props;
const project = projectEntry.data;
const mainImage = project.images.at(0);
---

<div
    class:list={classList}
    class="card card-compact card-bordered my-0 mb-5"
    {...rest}
>
    {
        mainImage && (
            <DivImage
                useOptimizedImgHeight={true}
                classList="rounded-md bg-clip-border h-[200px] lg:h-[240px] bg-no-repeat bg-contain sm:bg-cover bg-center  w-full hover:grayscale duration-700"
                options={{
                    src: mainImage,
                    height: 700,
                    quality: 100,
                    inferSize: true,
                }}
            />
        )
    }
    <div class="card-body mt-4 gap-2" style="padding: 0;">
        <div class="flex items-center justify-between lg:my-2">
            <div class="text-left">
                <h1
                    class="capitalize card-title font-extrabold tracking-tighter md:text-2xl"
                >
                    {project.title}
                </h1>
            </div>
            <div class="flex">
                {
                    project.links.map((link) => (
                        <a
                            class="btn text-secondary lg:btn-link bg-base-200  hover:btn-outline"
                            target="_blank"
                            href={link.url}
                        >
                            {link.label}
                            <Icon name="carbon:arrow-up-right" class=" mr-1" />
                        </a>
                    ))
                }
            </div>
        </div>

        <article class="prose text-secondary">
            <Fragment set:html={projectEntry.body} />
        </article>
        <div class="flex gap-2 my-4 flex-wrap content-around">
            {
                project.tags.map((tag) => (
                    <div class="badge text-center text-xs py-3  align-middle shadow-sm badge-secondary">
                        {tag}
                    </div>
                ))
            }
        </div>
    </div>
</div>
